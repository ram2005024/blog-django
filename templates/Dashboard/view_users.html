{% extends 'base.html' %}
{% block content %}
  <div class="w-full mx-auto mt-10">
    <div class="flex gap-10">
      {% comment %}Side bar{% endcomment %}
      {% include 'Dashboard/sidebar.html' %}
      {% comment %}Right section{% endcomment %}
      {% if perms.auth.view_user %}
        <div class="flex flex-col gap-4 w-full">
          <h1 class="text-2xl text-center mb-4">All Users</h1>
          <a href="{% url 'add_user' %}" class="px-4 w-fit self-end cursor-pointer p-2 h-fit bg-indigo-500 rounded-md text-white">Add new</a>
          <div class="flex flex-col w-full h-80 overflow-y-scroll">
            <table class="table-auto">
              <thead>
                <tr>
                  <th class="p-1.5">SN.</th>
                  <th class="p-1.5">FullName</th>
                  <th class="p-1.5">Username</th>
                  <th class="p-1.5">Active</th>
                  <th class="p-1.5">Superuser</th>
                  <th class="p-1.5">Staff</th>
                  <th class="p-1.5">Action</th>
                </tr>
              </thead>
              <tbody>
                {% for user in users %}
                  <tr class="transition-all duration-200 cursor-pointer ease-in-out hover:bg-gray-100">
                    <td class="p-3 text-center">{{ forloop.counter }}</td>
                    <td class="p-3 text-center">{{ user.first_name }} {{ user.last_name }}</td>
                    <td class="p-3 text-center">{{ user.username }}</td>
                    <td class="p-3 text-center">
                      {% if user.is_active %}
                        <i class="fa-solid fa-check text-green-500"></i>
                      {% else %}
                        <i class="fa-solid fa-x text-red-500"></i>
                      {% endif %}
                    </td>
                    <td class="p-3 text-center">
                      {% if user.is_superuser %}
                        <i class="fa-solid fa-check text-green-500"></i>
                      {% else %}
                        <i class="fa-solid fa-x text-red-500"></i>
                      {% endif %}
                    </td>
                    <td class="p-3 text-center">
                      {% if user.is_staff %}
                        <i class="fa-solid fa-check text-green-500"></i>
                      {% else %}
                        <i class="fa-solid fa-x text-red-500"></i>
                      {% endif %}
                    </td>
                    <td class="p-3 text-center flex items-center">
                      <a href="{% url 'edit_user' user.id %}"><i class="fa-regular fa-pen-to-square text-gray-500"></i></a>

                      <a href="{% url 'delete_user' user.id %}"><i class="fa-regular fa-trash-can text-red-500"></i></a>
                    </td>
                  </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
      {% else %}
        <h2 class="text-5xl font-serif">You arenot allowded to view this page</h2>
      {% endif %}
    </div>
  </div>
{% endblock %}
